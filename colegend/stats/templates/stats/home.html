{% extends 'page.html' %}
{% load icons %}

{% block page_title %}
    Stats
{% endblock %}

{% block up_url %}{% url "stats:home" %}{% endblock %}

{% block page_controls %}
    <div>
    <span data-toggle="tooltip" title="Manager Stats" class="pull-right" data-placement="left">
    {% if user.is_superuser %}
        <a href="{% url "stats:manager" %}" class="btn btn-danger">{% icon "stats" %}</a>
    {% endif %}
    </span>
    </div>
{% endblock %}

{% block extra_head %}
    {{ block.super }}
    <script type="text/javascript" src="https://www.google.com/jsapi"></script>
{% endblock %}

{% block page_content %}
    <div class="well">
        Ahhh.. the place where the nerd-ego loves to hang around.. STATISTICS! :D<br/>
        So, what have we got for now.. (I am currently working on this section)<br/>

        <div class="row">
            <div class="col-md-3">
                <h2>Legend</h2>
                Age: {{ user_days }}<br/>

                <h2>Journal</h2>
                Entries: {{ journal_entries }}<br/>
                Streak: {{ journal_streak }}<br/>
                Best Streak: {{ journal_max_streak }}<br/>
            </div>
            <div class="col-md-3">
                <h2>Tasks</h2>

                <div class="sr-only">
                    Total: {{ tasks_total }}<br/>
                    Open: {{ tasks_open }}<br/>
                    Completed: {{ tasks_closed }}<br/>
                    <br/>
                    Next: {{ tasks_next }}<br/>
                    Todo: {{ tasks_todo }}<br/>
                    Waiting: {{ tasks_waiting }}<br/>
                    Someday: {{ tasks_someday }}<br/>
                    Maybe: {{ tasks_maybe }}<br/>
                    Done: {{ tasks_done }}<br/>
                    Canceled: {{ tasks_canceled }}<br/>
                </div>

                <script type="text/javascript">
                    google.load("visualization", "1", {packages: ["corechart"]});
                    google.setOnLoadCallback(drawChart);
                    function drawChart() {
                        var data = google.visualization.arrayToDataTable([
                            ['Status', 'Tasks per Status'],
                            ['Next: {{ tasks_next }}', {{ tasks_next }}],
                            ['Todo: {{ tasks_todo }}', {{ tasks_todo }}],
                            ['Waiting: {{ tasks_waiting }}', {{ tasks_waiting }}],
                            ['Someday: {{ tasks_someday }}', {{ tasks_someday }}],
                            ['Maybe: {{ tasks_maybe }}', {{ tasks_maybe }}],
                            ['Done: {{ tasks_done }}', {{ tasks_done }}],
                            ['Canceled: {{ tasks_canceled }}', {{ tasks_canceled }}]
                        ]);
                        var options = {
                            title: '{{ tasks_total }} Tasks ({{ tasks_open }} open, {{ tasks_closed }} closed)',
                            slices: {
                                0: { color: '#d9534f' },
                                1: { color: '#f0ad4e' },
                                2: { color: 'purple' },
                                3: { color: '#428bca' },
                                4: { color: '#5bc0de' },
                                5: { color: '#5cb85c' },
                                6: { color: 'darkgreen' }
                            }
                        };
                        var chart = new google.visualization.PieChart(document.getElementById('task-piechart'));
                        chart.draw(data, options);
                    }
                </script>
                <div id="task-piechart" style="width: 100%; height: 100%; overflow: scroll"></div>


            </div>
            <div class="col-md-3">
                <h2>Projects</h2>

                <div class="sr-only">
                    Total: {{ projects_total }}<br/>
                    Open: {{ projects_open }}<br/>
                    Completed: {{ projects_closed }}<br/>
                    <br/>
                    Next: {{ projects_next }}<br/>
                    Todo: {{ projects_todo }}<br/>
                    Waiting: {{ projects_waiting }}<br/>
                    Someday: {{ projects_someday }}<br/>
                    Maybe: {{ projects_maybe }}<br/>
                    Done: {{ projects_done }}<br/>
                    Canceled: {{ projects_canceled }}<br/>
                </div>
                <script type="text/javascript">
                    google.load("visualization", "1", {packages: ["corechart"]});
                    google.setOnLoadCallback(drawChart);
                    function drawChart() {
                        var data = google.visualization.arrayToDataTable([
                            ['Status', 'Projects per Status'],
                            ['Next: {{ projects_next }}', {{ projects_next }}],
                            ['Todo: {{ projects_todo }}', {{ projects_todo }}],
                            ['Waiting: {{ projects_waiting }}', {{ projects_waiting }}],
                            ['Someday: {{ projects_someday }}', {{ projects_someday }}],
                            ['Maybe: {{ projects_maybe }}', {{ projects_maybe }}],
                            ['Done: {{ projects_done }}', {{ projects_done }}],
                            ['Canceled: {{ projects_canceled }}', {{ projects_canceled }}]
                        ]);
                        var options = {
                            title: '{{ projects_total }} Projects ({{ projects_open }} open, {{ projects_closed }} closed)',
                            slices: {
                                0: { color: '#d9534f' },
                                1: { color: '#f0ad4e' },
                                2: { color: 'purple' },
                                3: { color: '#428bca' },
                                4: { color: '#5bc0de' },
                                5: { color: '#5cb85c' },
                                6: { color: 'darkgreen' }
                            }
                        };
                        var chart = new google.visualization.PieChart(document.getElementById('project-piechart'));
                        chart.draw(data, options);
                    }
                </script>
                <div id="project-piechart" style="width: 100%; height: 100%; overflow: scroll"></div>

            </div>
            <div class="col-md-3">
                <h2>Tags</h2>
                Total: {{ tags_total }}<br/>

                <h2>Quotes</h2>
                Shared: {{ quotes_total }}<br/>

                <h2>Notifications</h2>
                Total: {{ notifications_total }}<br/>
                Read: {{ notifications_read }}<br/>
                Unread: {{ notifications_unread }}<br/>
            </div>
        </div>
    </div>
    <div class="well well-sm">
        <h4>Feedback</h4>
        Which stats do you want to have?<br/>
        <a href="{% url "contact" %}" class="btn btn-default">Suggest</a>
    </div>
{% endblock %}
