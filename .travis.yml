# Config file for automatic testing at travis-ci.org

#sudo: false

language: python

python:
  - "3.4"

# Whitelisting branches
branches:
  only:
    - master

env:
  - DB=sqlite

# Saucelabs brower testing
addons:
  sauce_connect:
    username: "eraldo"
    access_key:
      secure: "t+HDOa7LYYa5BUelbw3Ah2anqALoPqju4/h73t1J0OpDBds3SK+7Wklxlqh2syIP0v/mBVpYGOoNBnri5sabZ0U0Cf8piMoxnMB8ktMVcdMvWi4Dq2kF5EGAbERD64IbQICMBB/fPfGgWp2k6zTbC5XWkOoaQEMBblkNTubCGcc="

# command to install dependencies, e.g. pip install -r requirements.txt --use-mirrors
install:
  - pip install -r requirements/test.txt
# preparation command

before_script:
  - cd colegend
  - export DISPLAY=:99.0
  - sh -e /etc/init.d/xvfb start
  - sleep 3 # give xvfb some time to start

# command to run tests, e.g. python setup.py test
script:  coverage run --source='.' manage.py test --settings=configuration.settings.test

services:
  - selenium

after_script:
  - sh -e /etc/init.d/xvfb stop

after_success:
  # Report coverage results to coveralls.io
  - pip install coveralls
  - coveralls
