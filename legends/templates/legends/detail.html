{% extends 'legends/base.html' %}
{% load static icons %}

{% block title %}Legend{% endblock %}

{% block breadcrumbs %}
    {% include '_breadcrumb.html' with url='legends:list' icon='users' title='legends' %}
{% endblock %}

{% block page_links %}
    <a href="#" class="btn btn-link btn-sm disabled">{% icon 'locked' %} Hero</a>
    <a href="#" class="btn btn-link btn-sm disabled">{% icon 'locked' %} Demon</a>
    {% if legend.owner.outercall %}
        <a href="{% url 'outer-call:create' %}" class="btn btn-link btn-sm">Outer Call</a>
    {% endif %}
    {% if legend.owner.innercall %}
        <a href="{% url 'inner-call:create' %}" class="btn btn-link btn-sm">Inner Call</a>
    {% endif %}
    {% if legend.biography %}
        <a href="{% url 'legends:biography' %}" class="btn btn-link btn-sm">Biography</a>
    {% endif %}
    <div class="clearfix"></div>
{% endblock %}

{% block pre_content %}
    <blockquote class="blockquote bg-content">
        <p>
            Accept no one's definition of your life, but define yourself.
        </p>
        <footer>
            <cite title="Source Title">by Harvey Fierstein</cite>
            <span class="pull-right">shared by Millionaire Tiger Entrepreneur</span>
        </footer>
        <div class="clearfix"></div>
    </blockquote>

    <p>
        {% include 'legends/chats/introduction.html' %}
    </p>
{% endblock %}

{% block content %}
    <div class="row">
        <div class="col-md-3 text-center">
            {% static 'legends/images/coLegend-hero.png' as hero_avatar_url %}
            {% include 'legends/widgets/avatar.html' with source=hero_avatar_url name='Hero' class='image-medium' %}
        </div>
        <div class="col-md-6 text-center">
            {% if legend.avatar %}
                {% url 'legends:avatar' owner=legend.owner.username as legend_avatar_url %}
                {% include 'legends/widgets/avatar.html' with source=legend.avatar.large.url name=legend.owner url=legend_avatar_url class='image-large' %}
            {% else %}
                {% include 'legends/widgets/avatar.html' with name=legend.owner url=legend.get_absolute_url class='image-large' %}
            {% endif %}
        </div>
        <div class="col-md-3 text-center">
            {% static 'legends/images/coLegend-demon.png' as demon_avatar_url %}
            {% include 'legends/widgets/avatar.html' with source=demon_avatar_url name='Demon' class='image-medium' %}
        </div>
    </div>
    <p></p>
    <div class="row">
        <div class="col-md-3">
            <div class="card">
                <div class="card-header">
                    About
                    <a href="{% url 'legends:update' owner=legend.owner.username %}" class="pull-right">
                        {% icon 'edit' %}
                    </a>
                </div>
                <div class="card-block">
                    {% if legend.name %}
                        <p>
                            {% icon 'legend' fixed=True %}
                            {{ legend.name }}
                        </p>
                    {% endif %}
                    {% if legend.birthday %}
                        <p>
                            {% icon 'birthday-cake' fixed=True %} {{ legend.birthday }}
                        </p>
                    {% endif %}
                    {% if legend.city %}
                        <p>
                            {% icon 'map-marker' fixed=True %}
                            {{ legend.city }}
                        </p>
                    {% endif %}
                    <a href="mailto:{{ legend.owner.email }}" target="_blank" class="btn btn-primary btn-sm">
                        {% icon 'send' %} Send Message
                    </a>
                </div>
            </div>
            <div class="card">
                <div class="card-header">
                    Relations
                </div>
                <div class="card-block">
                    {% if legend.owner.guiderelation.guide %}
                        <p class="center-block">
                            Cloud guide:
                            {% with guide=legend.owner.guiderelation.guide %}
                                {% include 'legends/widgets/avatar_small.html' with name=guide source=guide.legend.avatar.small.url url=guide.get_absolute_url %}
                            {% endwith %}
                        </p>
                    {% else %}
                        No relations yet.
                    {% endif %}
                </div>
            </div>
        </div>
        <div class="col-md-6">
            <div class="card">
                <div class="card-header">
                    Badges
                </div>
                <div class="card-block">
                    <img src="{% static 'legends/images/badges/Core_Team_Badge.png' %}" class="badge team"
                         alt="badge team">
                    <img src="{% static 'legends/images/badges/Cloud_Guide_Badge.png' %}" class="badge guide"
                         alt="badge guide">
                </div>
            </div>

            <div class="card">
                <div class="card-header">
                    Story Update
                </div>
                <div class="card-block">
                    ...
                </div>
            </div>

            <div class="card">
                <div class="card-header">
                    Latest Activities
                </div>
                <div class="card-block">
                    ...
                </div>
            </div>


        </div>
        <div class="col-md-3">
            <div class="card">
                <div class="card-header">
                    Status
                </div>
                <div class="card-block">
                    <p>{{ legend.legend_days }} Legend days</p>

                    <p>Chapter {{ legend.chapter }}</p>

                    <p class="text-muted">Animal</p>
                </div>
            </div>

            <div class="card">
                <div class="card-header">
                    Biography
                </div>
                <div class="card-block">
                    {{ legend.biography }}
                </div>
            </div>

        </div>
    </div>
{% endblock %}
